# 首页第三屏导弹发射模拟功能详细设计

## 一、功能概述

### 1.1 核心目标
在首页第三屏（MapSection）中，为台湾用户提供**交互式导弹发射模拟**功能，允许用户：
- 选择导弹类型（雄风-2E、擎天、云峰等）
- 在大陆地图上点击目标位置
- 观看导弹从台湾发射基地飞向目标的动画轨迹
- 查看命中效果和统计信息

### 1.2 设计理念
- **沉浸式体验**：模拟真实军事指挥系统的操作界面
- **视觉冲击**：导弹轨迹动画、爆炸效果、音效反馈
- **数据记录**：记录每次发射，形成发射历史统计
- **游戏化元素**：消耗TOT Token、成就系统、排行榜

---

## 二、UI/UX设计

### 2.1 导弹发射控制面板（左侧大陆地图）

**位置**：大陆地图左上角，悬浮面板

**样式**：
- 背景：`bg-black/90`，边框：`border-red-900`
- 字体：`font-mono`，军事风格
- 尺寸：`w-80 max-h-[70vh] overflow-y-auto`

### 2.2 发射历史记录面板（右侧台湾地图）

**位置**：台湾地图右上角，悬浮面板

**样式**：
- 背景：`bg-black/90`，边框：`border-orange-900`
- 尺寸：`w-72 max-h-[60vh] overflow-y-auto`

---

## 三、技术实现

### 3.1 导弹轨迹动画
- 使用高德地图Polyline绘制轨迹
- 导弹图标沿轨迹移动动画
- 到达目标后显示爆炸效果

### 3.2 后端API
- POST /api/homepage/map/missile-launch - 记录发射
- GET /api/homepage/map/missile-launch-history - 获取历史

### 3.3 数据存储
- 使用homepageStorage存储发射记录
- 最多保留1000条记录

---

## 四、游戏化元素

- 每次发射消耗100 TOT Token
- 发射历史统计
- 命中率计算
