# 全国城市位置系数指南

## 📊 位置系数说明

位置系数用于计算房产避险加成，范围：**0.5 - 2.0**

**计算公式**：
```
位置加成 = 位置系数 × 5%
```

**示例**：
- 乌鲁木齐（系数 2.0）= +10% 生存率
- 商洛（系数 1.5）= +7.5% 生存率
- 西安（系数 1.2）= +6% 生存率
- 上海（系数 0.7）= +3.5% 生存率
- 厦门（系数 0.5）= +2.5% 生存率

---

## 🗺️ 位置系数分级

### 1. 极度安全（1.8 - 2.0）

**特点**：距离台湾最远，深山、偏远地区

**城市示例**：
- 新疆：乌鲁木齐、克拉玛依、喀什、库尔勒（2.0）
- 西藏：拉萨、日喀则、林芝（2.0）
- 青海：格尔木、德令哈（2.0）
- 甘肃：酒泉、张掖（1.9-2.0）
- 内蒙古：呼伦贝尔、锡林郭勒（1.8）
- 黑龙江：大兴安岭（1.8）

**避险加成**：+9% - +10%

---

### 2. 高度安全（1.5 - 1.8）

**特点**：内陆深处，距离台湾 > 1500km

**城市示例**：
- 青海：西宁（1.8）
- 甘肃：兰州、武威（1.8）
- 宁夏：银川（1.7）
- 四川：攀枝花、凉山、甘孜、阿坝（1.6-1.9）
- 云南：丽江、保山、怒江、迪庆（1.6-1.9）
- 陕西：商洛、榆林（1.5）
- 山西：大同、朔州、忻州、吕梁（1.3）
- 黑龙江：哈尔滨、齐齐哈尔、伊春、黑河（1.3-1.5）

**避险加成**：+7.5% - +9%

---

### 3. 中等安全（1.2 - 1.5）

**特点**：内陆，距离台湾 > 1000km

**城市示例**：
- 陕西：西安、宝鸡、汉中、安康（1.2-1.3）
- 四川：成都、绵阳、德阳（1.4）
- 云南：昆明、曲靖（1.5）
- 贵州：贵阳、遵义（1.4）
- 重庆：重庆（1.3）
- 河南：三门峡（1.2）
- 河北：张家口、承德（1.2-1.3）
- 山西：太原、长治、晋城（1.2）

**避险加成**：+6% - +7.5%

---

### 4. 相对安全（1.0 - 1.2）

**特点**：近内陆，距离台湾 > 500km

**城市示例**：
- 陕西：咸阳、渭南、铜川（1.1-1.2）
- 河南：郑州、洛阳、南阳（1.0-1.1）
- 湖北：武汉、襄阳、宜昌、十堰、恩施（1.0-1.3）
- 湖南：长沙、株洲、湘潭、张家界、湘西（1.0-1.3）
- 江西：南昌、赣州、吉安（0.9-1.0）
- 北京：北京（1.0）
- 河北：石家庄、保定、邯郸（1.0）
- 山东：济南、济宁、泰安、德州（1.0）

**避险加成**：+5% - +6%

---

### 5. 一般安全（0.8 - 1.0）

**特点**：沿海内侧，距离台湾 < 500km

**城市示例**：
- 江苏：南京、徐州、淮安、扬州、镇江（0.8-1.0）
- 浙江：杭州、湖州、绍兴、金华、衢州、丽水（0.8-1.0）
- 安徽：合肥、芜湖、蚌埠、淮南、安庆、黄山、六安（0.8-1.0）
- 江西：九江、上饶（0.8）
- 天津：天津（0.9）
- 河北：唐山、秦皇岛、沧州、廊坊（0.8-0.9）
- 山东：青岛、烟台、威海、日照、潍坊、临沂（0.8-0.9）
- 辽宁：沈阳、鞍山、抚顺、本溪、阜新、辽阳、铁岭、朝阳（1.0-1.1）

**避险加成**：+4% - +5%

---

### 6. 较低安全（0.5 - 0.8）

**特点**：沿海，距离台湾较近

**城市示例**：
- 上海：上海（0.7）
- 江苏：无锡、常州、苏州、南通、连云港、盐城、泰州、宿迁（0.7-0.8）
- 浙江：宁波、温州、嘉兴、湖州、舟山、台州（0.6-0.8）
- 福建：福州、莆田、泉州、漳州、宁德（0.6-0.7）
- 广东：广州、深圳、珠海、汕头、佛山、江门、湛江、茂名、肇庆、惠州、东莞、中山（0.5-0.8）
- 广西：南宁、柳州、桂林、梧州、北海、防城港、钦州、贵港、玉林（0.6-1.0）
- 海南：海口、三亚、儋州（0.6-0.7）
- 辽宁：大连、丹东、营口、盘锦、葫芦岛（0.8-0.9）

**避险加成**：+2.5% - +4%

---

## 📈 位置系数设计原则

### 1. 距离原则
- **距离台湾越远，系数越高**
- 新疆、西藏：2.0（最远）
- 西北、西南：1.5-1.8（很远）
- 华中、华北：1.0-1.5（中等）
- 华东、华南：0.5-1.0（较近）

### 2. 地理原则
- **内陆 > 沿海**
- **山区 > 平原**
- **偏远 > 繁华**

### 3. 安全等级
- **1.8-2.0**：極度安全（深山/偏遠）
- **1.5-1.8**：高度安全（內陸深處）
- **1.2-1.5**：中等安全（內陸）
- **1.0-1.2**：相對安全（近內陸）
- **0.8-1.0**：一般安全（沿海內側）
- **0.5-0.8**：較低安全（沿海）

---

## 🔍 查找城市位置系数

### 方法 1: 直接查询

```javascript
import { getLocationCoefficient } from './utils/locationCoefficient.js';

const coefficient = getLocationCoefficient('乌鲁木齐'); // 返回 2.0
const coefficient2 = getLocationCoefficient('上海'); // 返回 0.7
```

### 方法 2: 模糊匹配

系统支持模糊匹配，如果城市名包含在映射表中，会自动匹配：

```javascript
getLocationCoefficient('乌鲁木齐市'); // 匹配到 '乌鲁木齐' → 2.0
getLocationCoefficient('上海市'); // 匹配到 '上海' → 0.7
```

### 方法 3: 省份匹配

如果城市名包含省份名称，会使用省份的默认系数：

```javascript
getLocationCoefficient('新疆某市'); // 使用新疆默认值 → 2.0
getLocationCoefficient('广东省某市'); // 使用广东默认值 → 0.7
```

---

## 📊 位置系数统计

### 按地区分布

| 地区 | 系数范围 | 城市数量 | 代表城市 |
|------|---------|---------|---------|
| 西北 | 1.7-2.0 | 50+ | 乌鲁木齐、拉萨、西宁、兰州 |
| 西南 | 1.3-1.9 | 80+ | 成都、昆明、贵阳、重庆 |
| 华中 | 1.0-1.5 | 100+ | 西安、郑州、武汉、长沙 |
| 华北 | 0.9-1.3 | 60+ | 北京、天津、石家庄、太原 |
| 东北 | 1.0-1.5 | 40+ | 哈尔滨、长春、沈阳 |
| 华东 | 0.7-1.0 | 80+ | 上海、南京、杭州、合肥 |
| 华南 | 0.5-0.9 | 50+ | 广州、深圳、福州、厦门 |

---

## 💡 使用示例

### 后端计算

```javascript
import { getLocationCoefficient } from './utils/locationCoefficient.js';

const cityName = '乌鲁木齐';
const coefficient = getLocationCoefficient(cityName); // 2.0
const locationBonus = coefficient * 5; // 10% 生存率加成
```

### 前端显示

```jsx
<div className="location-info">
  <div>城市：{asset.city}</div>
  <div>位置系数：{coefficient}</div>
  <div>避险加成：+{coefficient * 5}%</div>
</div>
```

---

## 🔄 更新和维护

### 添加新城市

在 `server/utils/locationCoefficient.js` 的 `LOCATION_COEFFICIENT_MAP` 中添加：

```javascript
"新城市名": 1.5, // 根据距离和地理位置设置系数
```

### 调整系数

根据实际需求调整城市的位置系数，原则：
- 距离台湾越远，系数越高
- 内陆比沿海系数高
- 山区比平原系数高

---

## ✅ 总结

位置系数系统现已覆盖**全国 400+ 个主要城市**，包括：

- ✅ 所有省会城市
- ✅ 所有地级市
- ✅ 主要县级市
- ✅ 特殊地区（新疆、西藏等）

**核心优势**：
- 自动匹配：支持模糊匹配和省份匹配
- 灵活扩展：易于添加新城市
- 准确计算：基于地理位置和距离台湾的距离

