# 获取高德地图 API Key 完整指南

## 📋 步骤详解

### 步骤 1: 访问高德开放平台

打开浏览器，访问：
```
https://console.amap.com/
```

---

### 步骤 2: 注册/登录账号

1. **如果您已有账号**:
   - 点击"登录"
   - 输入账号密码登录

2. **如果您是新用户**:
   - 点击"注册"
   - 填写手机号码和验证码
   - 设置密码
   - 完成注册

---

### 步骤 3: 进入控制台

登录成功后，会自动进入控制台（或点击右上角"控制台"）。

---

### 步骤 4: 创建应用

1. **点击"应用管理"**
   - 在左侧菜单找到"应用管理"
   - 或访问: https://console.amap.com/dev/app/list

2. **点击"创建新应用"**
   - 在页面右上角找到"创建新应用"按钮
   - 点击进入创建页面

3. **填写应用信息**:
   - **应用名称**: `TWS 资产管理系统`（或您喜欢的名称）
   - **应用类型**: 选择 `Web服务`
   - **应用描述**: 可选，填写"用于资产地址搜索和地理编码"

4. **点击"创建"**

---

### 步骤 5: 添加 Key

1. **找到刚创建的应用**
   - 在应用列表中找到刚才创建的应用
   - 点击应用名称进入详情页

2. **点击"添加"按钮**
   - 在 Key 列表区域找到"添加"按钮

3. **填写 Key 信息**:
   - **Key 名称**: `Web服务API`（或您喜欢的名称）
   - **服务平台**: 选择 `Web服务`
   - **其他选项**: 保持默认即可

4. **点击"提交"**

5. **复制生成的 Key**
   - 系统会生成一个 Key（格式类似：`xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`）
   - **重要**: 立即复制并保存这个 Key，它只会显示一次！

---

## 🔑 API Key 格式

高德地图 API Key 通常格式如下：
- 长度: 约 32 个字符
- 格式: 字母数字组合
- 示例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`

---

## ⚠️ 注意事项

### 1. Key 类型必须正确

- ✅ **必须选择**: `Web服务`
- ❌ **不要选择**: `Web端(JS API)`

### 2. 安全提示

- 🔒 Key 是私密信息，不要公开分享
- 🔒 不要将 Key 提交到 Git 仓库（已在 .gitignore 中）
- 🔒 定期检查 Key 使用情况

### 3. 免费额度

- 📊 个人开发者: **30万次/天**
- 📊 超出后需要付费
- 📊 一般使用完全够用

---

## ✅ 获取 Key 后的配置步骤

### 方法 1: 使用配置脚本（推荐）

1. **在终端运行**:
   ```bash
   chmod +x configure-amap-key.sh
   ./configure-amap-key.sh
   ```

2. **输入您的 API Key**

3. **脚本会自动更新 .env 文件**

### 方法 2: 手动配置

1. **打开项目根目录的 `.env` 文件**

2. **找到或添加这一行**:
   ```bash
   VITE_AMAP_API_KEY=你的实际API_Key
   ```

3. **保存文件**

---

## 🧪 验证配置

配置完成后：

1. **重启开发服务器**:
   ```bash
   # 停止服务器（Ctrl+C）
   npm run dev
   ```

2. **访问测试页面**:
   ```
   http://localhost:5174/test-amap
   ```

3. **应该看到**:
   - ✅ "已检测到高德地图 API Key 配置"
   - ✅ 可以点击"测试搜索"和"测试编码"按钮

---

## 🐛 常见问题

### 问题 1: 找不到"创建新应用"按钮

**解决方法**:
- 确认已登录账号
- 检查是否在"控制台"页面
- 尝试刷新页面

### 问题 2: Key 类型选项中没有"Web服务"

**解决方法**:
- 确认应用类型选择了"Web服务"
- 如果还是没有，尝试创建"服务端"类型的应用

### 问题 3: Key 复制后无法使用

**解决方法**:
- 检查是否复制了完整 Key（包括前后空格）
- 确认 Key 类型是"Web服务"
- 等待几分钟后重试（新创建的 Key 可能需要时间生效）

### 问题 4: 提示"INVALID_USER_KEY"

**解决方法**:
- 检查 Key 是否正确复制
- 确认 Key 已启用
- 确认 Key 类型是"Web服务"
- 登录控制台检查 Key 状态

---

## 📞 获取帮助

如果遇到问题：

1. **高德开放平台帮助文档**:
   https://lbs.amap.com/api/webservice/summary

2. **高德开放平台技术支持**:
   - 在控制台页面找到"帮助中心"
   - 或联系客服

---

## ✅ 配置检查清单

- [ ] 已注册/登录高德开放平台账号
- [ ] 已创建应用（类型：Web服务）
- [ ] 已添加 Key（类型：Web服务）
- [ ] 已复制并保存 API Key
- [ ] 已在 .env 文件中配置 VITE_AMAP_API_KEY
- [ ] 已重启开发服务器
- [ ] 已在测试页面验证配置

---

**最后更新**: 2025-01-03

